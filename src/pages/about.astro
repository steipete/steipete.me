---
import Layout from '../layouts/Layout.astro'
import Link from '../components/Link.astro'
import { SOCIAL_LINKS } from '../consts'
import { createHash } from 'crypto'

// Generate Gravatar URL
function getGravatarUrl(email: string, size = 300): string {
  const hash = createHash('md5').update(email.toLowerCase().trim()).digest('hex')
  // Use secure Gravatar URL with fallback to mp (mystery person) and force default if no Gravatar found
  return `https://secure.gravatar.com/avatar/${hash}?s=${size}&d=mp&f=y`
}

const gravatarUrl = getGravatarUrl('steipete@gmail.com', 300)
---

<Layout title="About Me" description="iOS Developer, Entrepreneur, and Open Source Contributor">
  <section class="py-8">
    <div class="prose max-w-none">
      <h1 class="text-4xl font-bold tracking-tight mb-8">ðŸ‘‹ Hello, I'm Peter Steinberger</h1>

      <div class="flex flex-col md:flex-row gap-8 mb-8">
        <div class="flex-shrink-0">
          <img
            src={gravatarUrl}
            alt="Peter Steinberger"
            class="rounded-md max-w-[300px] h-auto"
          />
        </div>

        <div>
          <p class="text-lg">
            I'm an iOS developer, entrepreneur, and open source contributor based in Vienna, Austria.
          </p>

          <p>
            I'm the founder of <Link href="https://pspdfkit.com" external underline>PSPDFKit</Link>, a company that provides PDF solutions for web, mobile, and desktop applications. After growing the company to serve thousands of customers worldwide, including Dropbox, Box, and IBM, we successfully sold to Insight Partners three years ago.
          </p>

          <p>
            Currently, I'm vibe coding my next project, exploring new technologies and opportunities in the web development ecosystem. After years in the native iOS space, I'm excited to be learning and building with modern web technologies.
          </p>
        </div>
      </div>

      <div class="space-y-6">
        <h2 class="text-2xl font-semibold">What I'm Passionate About</h2>
        <ul class="list-disc pl-6 space-y-2">
          <li>Building high-quality software with great user experiences</li>
          <li>Learning new technologies and frameworks</li>
          <li>Open source contributions and community building</li>
          <li>Sharing knowledge through writing and speaking</li>
          <li>Creating developer tools that improve workflows</li>
        </ul>

        <p>
          I've been an active open source contributor and have created or contributed to various iOS projects over the years. I'm a regular speaker at developer conferences around the world, sharing insights on software development, entrepreneurship, and technology.
        </p>

        <p>
          I'm passionate about building high-quality software, creating great user experiences, and sharing knowledge with the developer community through writing and speaking.
        </p>

        <h2 class="text-2xl font-semibold">Connect With Me</h2>

        <div class="flex flex-wrap gap-4">
          {SOCIAL_LINKS.map((link) => (
            <Link href={link.href} external={!link.href.startsWith('/')} class="px-4 py-2 bg-secondary rounded-md hover:bg-accent">
              {link.label}
            </Link>
          ))}
        </div>
      </div>
    </div>
  </section>
</Layout>