---
title: The Annotation Object Model
section: developers
---

This article explains how the [`PSPDFAnnotation`][] and [`PSPDFFormElement`][] classes can be used. For an overview of annotation support in PSPDFKit, see the [Introduction to Annotations][] guide.

To learn more about how you can check if annotations have been added/removed/changed, see the [Detecting If Annotations Have Changed][] guide.

## Changing Annotations

The annotation object model is based on [`PSPDFModel`][]. Changes need to be made on the main thread. If a [`PSPDFViewController`][] is currently displaying the [`PSPDFDocument`][] that owns the annotation, you should emit a change notification to ensure the UI is correctly updated:

[==

```swift
let freeTextAnnotation: PSPDFFreeTextAnnotation = ...
freeTextAnnotation.contents = "These are my new note contents."

NotificationCenter.default.post(name: NSNotification.Name.PSPDFAnnotationChanged, object: freeTextAnnotation, userInfo: [PSPDFAnnotationChangedNotificationKeyPathKey: ["contents"]])
```

```objc
PSPDFFreeTextAnnotation *freeTextAnnotation = ...;
freeTextAnnotation.contents = @"These are my new note contents.";

[NSNotificationCenter.defaultCenter postNotificationName:PSPDFAnnotationChangedNotification
object:freeTextAnnotation userInfo:@{PSPDFAnnotationChangedNotificationKeyPathKey : @[@"contents"]}];
```

==]

This sends a [`PSPDFAnnotationChangedNotification`][]. The [`PSPDFAnnotationChangedNotificationKeyPathKey`][] should match the change youâ€™ve made, as this enables PSPDFKit to perform additional performance optimizations (for example, various properties might not require a new render step).

## Adding Annotations

Annotations can be added by calling [`addAnnotations:options:`][] on your [`PSPDFDocument`][]. This will emit a [`PSPDFAnnotationsAddedNotification`][].

## Deleting Annotations

Deleting annotations should be performed by calling [`removeAnnotations:options:`][] on your [`PSPDFDocument`][]. This will emit either [`PSPDFAnnotationsRemovedNotification`][] or [`PSPDFAnnotationChangedNotification`][], depending on whether or not the annotation has already been saved in the PDF. If it has been saved, we need to use soft delete to track and correctly update the file.

## Thread Safety

Annotations should only be accessed on the main thread. They can be created and configured on any thread, but as soon as theyâ€™re added to a [`PSPDFDocument`][], they may only be modified on the main thread. Violating this convention can lead to crashes, data corruption, and deadlock.

> **ðŸ’¡ Tip:** You can also access annotations when tapping on them by implementing [`PSPDFViewControllerDelegate`][pspdfviewcontrollerdelegate-annotations] methods like [`-pdfViewController:didTapOnAnnotation:annotationPoint:annotationView:pageView:viewPoint:`][].

[`pspdfannotationchangednotification`]: https://pspdfkit.com/api/ios/Other%20Constants.html#/c:@PSPDFAnnotationChangedNotification
[`pspdfannotationchangednotificationkeypathkey`]: https://pspdfkit.com/api/ios/Other%20Constants.html#/c:@PSPDFAnnotationChangedNotificationKeyPathKey
[`pspdfformelement`]: https://pspdfkit.com/api/ios/Classes/PSPDFFormElement.html
[`pspdfannotationsremovednotification`]: https://pspdfkit.com/api/ios/Other%20Constants.html#/c:@PSPDFAnnotationsRemovedNotification
[`pspdfannotationsaddednotification`]: https://pspdfkit.com/api/ios/Other%20Constants.html#/c:@PSPDFAnnotationsAddedNotification
[introduction to annotations]: ../../annotations/introduction-to-annotations
[detecting if annotations have changed]: ../../annotations/detecting-if-annotations-have-changed
[`pspdfmodel`]: https://pspdfkit.com/api/ios/Classes/PSPDFModel.html
[`addannotations:options:`]: https://pspdfkit.com/api/ios/Classes/PSPDFDocument.html#/c:objc(cs)PSPDFDocument(im)addAnnotations:options:
[`removeannotations:options:`]: https://pspdfkit.com/api/ios/Classes/PSPDFDocument.html#/c:objc(cs)PSPDFDocument(im)removeAnnotations:options:
[pspdfviewcontrollerdelegate-annotations]: https://pspdfkit.com/api/ios/Protocols/PSPDFViewControllerDelegate.html#/Annotations
[`-pdfviewcontroller:didtaponannotation:annotationpoint:annotationview:pageview:viewpoint:`]: https://pspdfkit.com/api/ios/Protocols/PSPDFViewControllerDelegate.html#/c:objc(pl)PSPDFViewControllerDelegate(im)pdfViewController:didTapOnAnnotation:annotationPoint:annotationView:pageView:viewPoint:
