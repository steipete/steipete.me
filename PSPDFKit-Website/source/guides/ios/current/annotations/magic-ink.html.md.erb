---
title: Magic Ink
section: developers
---

With [PSPDFKit 8 for iOS][], we introduced a new annotation tool: Magic Ink. This tool allows you to draw on a PDF using the ink tool. Once you finish drawing, PSPDFKit will attempt to detect the shape you have drawn. If a shape is detected with high enough confidence, the drawn ink annotation will be replaced with a shape annotation. If not, the drawing is left untouched. This allows for a faster method of annotating your documents without needing to switch between different tools.

<video src="/images/guides/ios/annotations/magic-ink/MagicInk.mp4" width="75%" loop muted playsinline data-controller="video" data-video-autoplay="true"></video>

## Adding the Magic Ink Tool

The Magic Ink tool is defined as a variant of the ink tool. This tool is now included in the default presets for the annotation toolbar. If you customize the annotation toolbar and would like to add the Magic Ink tool, you can use [`PSPDFAnnotationVariantStringInkMagic`][] in the toolbar configuration as shown in our [annotation toolbar customization guide][]:

[==

```swift
let configuration = PSPDFAnnotationToolbarConfiguration(annotationGroups: [
        PSPDFAnnotationGroup(items: [
            PSPDFAnnotationGroupItem(type: .ink, variant: .inkMagic, configurationBlock: PSPDFAnnotationGroupItem.inkConfigurationBlock())
        ])
])
```

```objc
PSPDFAnnotationToolbarConfiguration *configuration = [[PSPDFAnnotationToolbarConfiguration alloc] initWithAnnotationGroups:@[
    [PSPDFAnnotationGroup groupWithItems:@[
        [PSPDFAnnotationGroupItem itemWithType:PSPDFAnnotationStringInk variant:PSPDFAnnotationStringInkMagic configurationBlock:[PSPDFAnnotationGroupItem inkConfigurationBlock]]]
    ]
]];
```

==]

The [`+[PSPDFAnnotationGroupItem inkConfigurationBlock]`][inkconfigblock] automatically selects the correct image for the Magic Ink variant.

## Supported Transformations

We support transformations of the following drawings into their corresponding shape annotations:

- Circle ([`PSPDFCircleAnnotation`][])
- Rectangle ([`PSPDFSquareAnnotation`][])
- Arrow ([`PSPDFLineAnnotation`][] with the [`lineEnd`][] set to [`PSPDFLineEndTypeOpenArrow`][])
- Line ([`PSPDFLineAnnotation`][] without a [`lineEnd`][])

## Controlling Replacement Threshold

If you’d like to change the threshold at which PSPDFKit replaces the ink annotation with a shape annotation, this can be controlled using [`PSPDFConfiguration`][]’s [`magicInkReplacementThreshold`][] property.

This property should always be set to a value between 0 (always replace) and 100 (replace only for perfect matches).

[pspdfkit 8 for ios]: https://pspdfkit.com/blog/2018/pspdfkit-ios-8-0/
[pspdfkit for ios]: https://pspdfkit.com/pdf-sdk/ios/
[`pspdfannotationvariantstringinkmagic`]: https://pspdfkit.com/api/ios/Other%20Constants.html#/c:@PSPDFAnnotationVariantStringInkMagic
[annotation toolbar customization guide]: ../../customizing-the-interface/customize-the-annotation-toolbar/
[inkconfigblock]: https://pspdfkit.com/api/ios/Classes/PSPDFAnnotationGroupItem.html#/c:objc(cs)PSPDFAnnotationGroupItem(cm)inkConfigurationBlock
[`pspdfcircleannotation`]: https://pspdfkit.com/api/ios/Classes/PSPDFCircleAnnotation.html
[`pspdflineannotation`]: https://pspdfkit.com/api/ios/Classes/PSPDFLineAnnotation.html
[`pspdfsquareannotation`]: https://pspdfkit.com/api/ios/Classes/PSPDFSquareAnnotation.html
[`lineend`]: https://pspdfkit.com/api/ios/Classes/PSPDFAbstractLineAnnotation.html#/c:objc(cs)PSPDFAbstractLineAnnotation(py)lineEnd1
[`pspdflineendtypeopenarrow`]: https://pspdfkit.com/api/ios/Enums/PSPDFLineEndType.html#/c:@E@PSPDFLineEndType@PSPDFLineEndTypeOpenArrow
[`magicinkreplacementthreshold`]: https://pspdfkit.com/api/ios/Classes/PSPDFConfiguration.html#/c:objc(cs)PSPDFConfiguration(py)magicInkReplacementThreshold
