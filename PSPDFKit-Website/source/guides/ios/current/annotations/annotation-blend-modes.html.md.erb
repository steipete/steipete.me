---
title: Blend Modes
section: developers
---

In [PSPDFKit 7.6 for iOS][], we introduced the ability to set blend modes for annotations. Blend modes let you decide how different layers of color will interact with each other and what the end result will be. One of the main use cases for this is to increase the legibility of markup annotations covering text. You can check out this [Wikipedia entry][] to learn more about blend modes and their use.

## Blend Modes Supported by PSPDFKit Annotations

| Name        | Description                                                                                                                                                        | Example                                                                    |
| ----------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------- |
| Normal      | Uses only the color of the annotation and ignores the background color.                                                                                            | ![](/images/guides/ios/annotations/annotation-blend-modes/normal.png)      |
| Multiply    | Multiplies the background content color with the annotation color.                                                                                                 | ![](/images/guides/ios/annotations/annotation-blend-modes/multiply.png)    |
| Screen      | Inverse values of the color component of both the annotation and background contents are multiplied with each other.                                               | ![](/images/guides/ios/annotations/annotation-blend-modes/screen.png)      |
| Overlay     | The annotation color is laid over the background content color, and it’s either multiplied or screened based on the background content color.                      | ![](/images/guides/ios/annotations/annotation-blend-modes/overlay.png)     |
| Darken      | The background content color is replaced with the annotation color if the annotation color is darker.                                                              | ![](/images/guides/ios/annotations/annotation-blend-modes/darken.png)      |
| Lighten     | The background content color is replaced with the annotation color if the annotation color is lighter.                                                             | ![](/images/guides/ios/annotations/annotation-blend-modes/lighten.png)     |
| Color Dodge | The annotation color is reflected by brightening the color of the background content.                                                                              | ![](/images/guides/ios/annotations/annotation-blend-modes/color-dodge.png) |
| Color Burn  | The annotation color is reflected by darkening the color of the background content.                                                                                | ![](/images/guides/ios/annotations/annotation-blend-modes/color-burn.png)  |
| Soft Light  | Darkening or lightening of colors is based on the background content color. The effect is similar to that of shining a diffuse spotlight on background content.    | ![](/images/guides/ios/annotations/annotation-blend-modes/soft-light.png)  |
| Hard Light  | Multiplies or screens the colors, depending on the background content color. The effect is similar to that of shining a harsh spotlight on the background content. | ![](/images/guides/ios/annotations/annotation-blend-modes/hard-light.png)  |
| Difference  | The darker color of the background content color and the annotation color is subtracted from the lighter color.                                                    | ![](/images/guides/ios/annotations/annotation-blend-modes/difference.png)  |
| Exclusion   | This is the same effect as difference but with low contrast.                                                                                                       | ![](/images/guides/ios/annotations/annotation-blend-modes/exclusion.png)   |

### iOS References

| Name        | Enumeration Case             |
| ----------- | :--------------------------- |
| Normal      | [`kCGBlendModeNormal`][]     |
| Multiple    | [`kCGBlendModeMultiply`][]   |
| Screen      | [`kCGBlendModeScreen`][]     |
| Overlay     | [`kCGBlendModeOverlay`][]    |
| Darken      | [`kCGBlendModeDarken`][]     |
| Lighten     | [`kCGBlendModeLighten`][]    |
| Color Dodge | [`kCGBlendModeColorDodge`][] |
| Color Burn  | [`kCGBlendModeColorBurn`][]  |
| Soft Light  | [`kCGBlendModeSoftLight`][]  |
| Hard Light  | [`kCGBlendModeHardLight`][]  |
| Difference  | [`kCGBlendModeDifference`][] |
| Exclusion   | [`kCGBlendModeExclusion`][]  |

## Supported Annotations

The [`blendMode`][] is a property defined on [`PSPDFAnnotation`][], and PSPDFKit supports blend modes on a few selected annotations. All types of ink, shape, markup, and free text annotations support blend modes. Stamp and image annotations support blend modes only via the use of the blend mode API. Other annotations — such as the redaction, sound, and link annotations — do not support styling with blend modes.

## How to Use Blend Modes

Blend modes work like any other style property on annotations: They can be applied onto any annotation (with the exception of the annotation types mentioned in the previous section) by using the API or via the UI.

### API Usage

Blend modes can easily be used on supported annotations by simply setting the [`blendMode`][] property on [`PSPDFAnnotation`][]:

[==

```swift
let inkAnnotation = PSPDFInkAnnotation()
// Set other required properties.
inkAnnotation.blendMode = .multiply
```

```objc
PSPDFInkAnnotation *inkAnnotation = [PSPDFInkAnnotation new];
// Set other required properties.
inkAnnotation.blendMode = kCGBlendModeMultiply;
```

==]

### UI Usage

The blend mode can also be changed via the UI using the annotation inspector ([`PSPDFAnnotationStyleViewController`][]). You can enable blend mode selection for annotation types by [customizing the annotation inspector][]. This can be achieved by adding the [`PSPDFAnnotationStyleKeyBlendMode`][] key to the [`propertiesForAnnotations`][] array for the desired annotation:

[==

```swift
let configuration = PSPDFConfiguration { builder in
  var annotationProperties = builder.propertiesForAnnotations

  annotationProperties[.ink] = [[AnnotationStyleKey.blendMode, AnnotationStyleKey.lineWidth, AnnotationStyleKey.color]]
  annotationProperties[.underline] = [[AnnotationStyleKey.blendMode, AnnotationStyleKey.alpha]]
  annotationProperties[.line] = [[AnnotationStyleKey.blendMode, AnnotationStyleKey.color]]

  builder.propertiesForAnnotations = annotationProperties
}
```

```objc
PSPDFConfiguration *configuration = [PSPDFConfiguration configurationWithBuilder: ^(PSPDFConfigurationBuilder *builder) {
  NSMutableDictionary *annotationProperties = [builder.propertiesForAnnotations mutableCopy];

  annotationProperties[PSPDFAnnotationStringInk] = @[@[PSPDFAnnotationStyleKeyBlendMode, PSPDFAnnotationStyleKeyLineWidth, PSPDFAnnotationStyleKeyColor]];
  annotationProperties[PSPDFAnnotationStringUnderline] = @[@[PSPDFAnnotationStyleKeyBlendMode, PSPDFAnnotationStyleKeyAlpha]];
  annotationProperties[PSPDFAnnotationStringLine] = @[@[PSPDFAnnotationStyleKeyBlendMode, PSPDFAnnotationStyleKeyColor]];

  builder.propertiesForAnnotations = annotationProperties;
}];
```

==]

The blend mode style option is, by default, only configured for ink annotations. You can also remove the blend mode style option for ink annotations by modifying the [`propertiesForAnnotations`][] dictionary and removing the [`PSPDFAnnotationStyleKeyBlendMode`][] key from it.

## PDF Storage

The annotation blend mode is not a standard key of the annotation dictionary in a PDF. Instead, PSPDFKit uses the defined blend mode when generating an annotation’s [appearance stream][]. The blend mode is encoded into the appearance stream drawing commands, from where PSPDFKit can also later decode it. Third-party PDF viewers that support annotation appearance stream rendering should be able to honor the set blend mode. If, however, the annotation is modified in a third-party editor or viewer, the annotation stream could be regenerated by that editor. In that case, the blend mode setting might be lost.

[pspdfkit 7.6 for ios]: https://pspdfkit.com/blog/2018/pspdfkit-ios-7-6/#blend-mode
[wikipedia entry]: https://en.wikipedia.org/wiki/Blend_modes
[`blendmode`]: https://pspdfkit.com/api/ios/Classes/PSPDFAnnotation.html#/c:objc(cs)PSPDFAnnotation(py)blendMode
[`pspdfannotation`]: https://pspdfkit.com/api/ios/Classes/PSPDFAnnotation.html#/c:objc(cs)PSPDFAnnotation
[`pspdfannotationstyleviewcontroller`]: https://pspdfkit.com/api/ios/Classes/PSPDFAnnotationStyleViewController.html
[customizing the annotation inspector]: ../../annotations/annotation-inspector/
[`propertiesforannotations`]: https://pspdfkit.com/api/ios/Classes/PSPDFConfiguration.html#/c:objc(cs)PSPDFConfiguration(py)propertiesForAnnotations
[`pspdfannotationstylekeyblendmode`]: https://pspdfkit.com/api/ios/Other%20Constants.html#/c:@PSPDFAnnotationStyleKeyBlendMode
[appearance stream]: https://pspdfkit.com/blog/2018/what-are-appearance-streams/.
[`kcgblendmodenormal`]: https://developer.apple.com/documentation/coregraphics/cgblendmode/kcgblendmodenormal?language=objc
[`kcgblendmodemultiply`]: https://developer.apple.com/documentation/coregraphics/cgblendmode/kCGBlendModeMultiply?language=objc
[`kcgblendmodescreen`]: https://developer.apple.com/documentation/coregraphics/cgblendmode/kCGBlendModeScreen?language=objc
[`kcgblendmodeoverlay`]: https://developer.apple.com/documentation/coregraphics/cgblendmode/kCGBlendModeOverlay?language=objc
[`kcgblendmodedarken`]: https://developer.apple.com/documentation/coregraphics/cgblendmode/kCGBlendModeDarken?language=objc
[`kcgblendmodelighten`]: https://developer.apple.com/documentation/coregraphics/cgblendmode/kCGBlendModeLighten?language=objc
[`kcgblendmodecolordodge`]: https://developer.apple.com/documentation/coregraphics/cgblendmode/kCGBlendModeColorDodge?language=objc
[`kcgblendmodecolorburn`]: https://developer.apple.com/documentation/coregraphics/cgblendmode/kCGBlendModeColorBurn?language=objc
[`kcgblendmodesoftlight`]: https://developer.apple.com/documentation/coregraphics/cgblendmode/kCGBlendModeSoftLight?language=objc
[`kcgblendmodehardlight`]: https://developer.apple.com/documentation/coregraphics/cgblendmode/kCGBlendModeHardLight?language=objc
[`kcgblendmodedifference`]: https://developer.apple.com/documentation/coregraphics/cgblendmode/kCGBlendModeDifference?language=objc
[`kcgblendmodeexclusion`]: https://developer.apple.com/documentation/coregraphics/cgblendmode/kCGBlendModeExclusion?language=objc
