---
title: Permissions
section: developers
---

Certain features in PSPDFKit need additional permissions, which will require modifications in your Info.plist file. Adding these descriptive keys has been a recommendation since iOS 7 and this has been strongly enforced since iOS 10. When the system prompts the user to allow access for a certain subsystem, the value of the permission key will be displayed as part of the alert. From the [Apple documentation][apple guide cocoa keys]:

> Important: To protect user privacy, an iOS app linked on or after iOS 10.0, and which accesses TYPE, must statically declare the intent to do so. Include the KEY in your app’s Info.plist file and provide a purpose string for this key. If your app attempts to access TYPE without a corresponding purpose string, your app exits.

These rules are enforced statically at upload time in App Store Connect. The static code analyzer can’t detect whether or not the code is being used, so the descriptions for `NSCameraUsageDescription` or `NSMicrophoneUsageDescription` need to be added when linked with PSPDFKit, even if you do not allow image or sound annotation creation. The description is not visible to the user; therefore, if you do not use this anywhere in your app, you can use something generic.

Learn more in [Apple’s Technical Q&A QA1937: Resolving the Privacy-Sensitive Data App Rejection][apple guide qa1937].

## Microphone Permissions

Creating [sound annotations][pspdfkit api pspdfsoundannotation] requires that you set the [`NSMicrophoneUsageDescription`][apple guide cocoa keys] key in your `Info.plist` file. This has been recommended since iOS 7 and enforced since iOS 10.

If you do not set this, the application will crash with the following error log:

```
[access] This app has crashed because it attempted to access privacy-sensitive data without a usage description.  The app’s Info.plist must contain an NSMicrophoneUsageDescription key with a string value explaining to the user how the app uses this data.
```

To fix this, edit your Info.plist and assign a descriptive string to this key. PSPDFKit has been checking for this since 5.5.1 to warn you in advance if you forget. See our sample projects for examples of such descriptions.

Apple statically checks for certain audio API such as `AVAudioRecorder`. Using this class is enough to require the microphone permissions, even when this code path is never executed. The implication is that even when sound annotations are completely disabled, this string must be set to pass the static App Store check. In such a case, keep the description string generic. If the review team follows up and asks what this is for, you can reference this guide page and explain that there's only one statically compiled binary of the PSPDFKit SDK, and the functionality is implemented but dormant. Permissions only appear in Settings once they have been requested, so the user will not see these permissions in the Settings app.

**ℹ️ Note:** Audio recording is not available in extension contexts, so this option will always be filtered out.

It is also recommended to add “audio” to the [`UIBackgroundModes`][] key to allow sound recording in the background. See [Apple QA1668][] for more details.

### App Store Considerations

Apple might request information about how it can test `UIBackgroundModes` — simply attach [a sample PDF that contains sound][] to this request. The file provided here contains copyright-free sample music and can be used to test sound annotations. Just make sure you don’t accidentally disable sound annotations by excluding them from [`-[PSPDFDocument renderAnnotationTypes]`][pspdfdocument renderannotationtypes].

## Image Permissions

Creating [image annotations (stamps)][pspdfkit api pspdfstampannotation] using the camera requires the [`NSCameraUsageDescription`][camera] key. Saving images requires [`NSPhotoLibraryAddUsageDescription`][photos].

## Browser Permissions

If you use `WKWebView` (e.g. via [`PSPDFWebsiteLinkAnnotationEditingViewController`][] for the link annotation editing UI, or via [`PSPDFWebViewController`][]), you might want to set `NSAllowsArbitraryLoadsInWebContent` to `YES` to allow both HTTP links and HTTPS pages that do not yet comply to Apple’s [App Transport Security][] rules to be loaded.

## Putting It All Together

Your Info.plist file should have following entries:

```
<key>UIBackgroundModes</key>
<array>
   <string>audio</string>
</array>
<key>NSMicrophoneUsageDescription</key>
<string>Recording sound annotations requires the microphone.</string>
<key>NSCameraUsageDescription</key>
<string>Pictures captured with the camera can be added to the document as image annotations.</string>
<key>NSPhotoLibraryAddUsageDescription</key>
<string>Images from documents and annotations can be saved to the photo library.</string>
<key>NSAppTransportSecurity</key>
<dict>
   <key>NSAllowsArbitraryLoadsInWebContent</key>
   <true/>
</dict>
```

[apple guide cocoa keys]: https://developer.apple.com/library/prerelease/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html
[apple guide qa1937]: https://developer.apple.com/library/content/qa/qa1937/_index.html
[pspdfkit api pspdfsoundannotation]: /api/ios/Classes/PSPDFSoundAnnotation.html
[`uibackgroundmodes`]: https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/BackgroundExecution/BackgroundExecution.html
[apple qa1668]: https://developer.apple.com/library/ios/qa/qa1668/_index.html
[a sample pdf that contains sound]: https://cl.ly/0R43200T102r
[pspdfkit api pspdfstampannotation]: /api/ios/Classes/PSPDFStampAnnotation.html
[camera]: https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW24
[photos]: https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW17
[`pspdfwebviewcontroller`]: /api/ios/Classes/PSPDFWebViewController.html
[app transport security]: https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW33
[pspdfdocument renderannotationtypes]: https://pspdfkit.com/api/ios/Classes/PSPDFDocument.html#/c:objc(cs)PSPDFDocument(py)renderAnnotationTypes
[`pspdfwebsitelinkannotationeditingviewcontroller`]: https://pspdfkit.com/api/ios/Classes/PSPDFWebsiteLinkAnnotationEditingViewController.html
