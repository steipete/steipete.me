---
title: How Do I Get Notified When a Password-Protected Document Is Unlocked?
section: knowledge-base
---

## Q: If I initialize a `PSPDFViewController` with a password-protected document, the `documentViewController` property is nil until the document is unlocked. Is there a way to be notified when the `documentViewController` becomes valid?

You can implement [`-[PSPDFViewControllerDelegate pdfViewController:didChangeControllerState:error:]`][-pdfviewcontroller:didchangecontrollerstate:error:] to get the non-nil document view controller when the document is unlocked, like so:

[==

```swift
let pdfController = PSPDFViewController(document: lockedDocument)
pdfController.delegate = self

...

func pdfViewController(_ pdfController: PSPDFViewController, didChange controllerState: PSPDFControllerState, error: Error?) {
    if controllerState == .default {
        if let layout = pdfController.documentViewController?.layout as? PSPDFContinuousScrollingLayout {
            layout.fillAlongsideTransverseAxis = true
        }
    }
}
```

```objc
PSPDFViewController *pdfController = [[PSPDFViewController alloc] initWithDocument:lockedDocument];
pdfController.delegate = self;

...

- (void)pdfViewController:(PSPDFViewController *)pdfController didChangeControllerState:(PSPDFControllerState)controllerState error:(nullable NSError *)error {
    if (controllerState == PSPDFControllerStateDefault) {
        PSPDFDocumentViewLayout *layout = pdfController.documentViewController.layout;
        if ([layout isKindOfClass:PSPDFContinuousScrollingLayout.class]) {
            ((PSPDFContinuousScrollingLayout *)layout).fillAlongsideTransverseAxis = YES;
        }
    }
}
```

==]

[-pdfviewcontroller:didchangecontrollerstate:error:]: https://pspdfkit.com/api/ios/Classes/PSPDFAnnotationSet.html
