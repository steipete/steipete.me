---
title: Page Text XSS Vulnerability
section: developers

secret: true
---

We found a cross-site scripting vulnerability in PSPDFKit for Web wherein a malicious PDF file could be used to execute arbitrary JavaScript.

Releases affected: All releases prior to 16 November 2018.  
Releases not affected: None.  
Browsers affected: Edge, Firefox, Internet Explorer 11.  
Fixed releases: 2018.6.1, 2018.5.2, 2018.4.3, 2018.3.3, 2018.2.2, 2018.1.5.

## Mitigation

If you are running an affected release, you should upgrade immediately.

To aid users who aren’t able to upgrade to the latest release immediately, we have provided patch releases for all releases from 2018:

- `2018.6.1`
- `2018.5.2`
- `2018.4.3`
- `2018.3.3`
- `2018.2.2`
- `2018.1.5`

## Details

Our code for measuring dimensions of text elements was using [`innerHTML`][] to set the content of a hidden DOM node, which it would then measure. Our text-rendering code was using this API with the text content from the PDF, while the text-measuring code expected only safe elements to be measured.

To prevent code from being executed, we changed to using the XSS-safe [`innerText`][] instead. We also reviewed all uses of `innerHTML` in the codebase to make sure we’re not passing unsafe strings anywhere else.

## Releases Affected

This vulnerability is present in all releases prior to 16 November 2018:

- `2018.6.0`
- `2018.5.1`
- `2018.5.0`
- `2018.4.2`
- `2018.4.1`
- `2018.4.0`
- `2018.3.2`
- `2018.3.1`
- `2018.3.0`
- `2018.2.1`
- `2018.2.0`
- `2018.1.4`
- `2018.1.3`
- `2018.1.2`
- `2018.1.1`
- `2018.1.0`
- `2017.9.4`
- `2017.9.3`
- `2017.9.2`
- `2017.9.1`
- `2017.9.0`
- `2017.8.1`
- `2017.8.0`
- `2017.7.1`
- `2017.7.0`
- `2017.6.1`
- `2017.6.0`
- `2017.5.4`
- `2017.5.3`
- `2017.5.2`
- `2017.5.1`
- `2017.5.0`
- `2017.4.0`
- `2017.3.2`
- `2017.3.1`
- `2017.3.0`
- `2017.2.0`
- `2017.1.0`
- `2016.3.0`
- `2016.2.1`
- `2016.2.0`
- `2016.1.0`
- `2016.1.0-beta.1`

[`innerhtml`]: https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML
[`innertext`]: https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/innerText
