---
title: Magic Ink
section: developers
---

With PSPDFKit 5.3 for Android, we introduced a new annotation tool: Magic Ink. This tool allows you to draw on a PDF using the ink tool. Once you finish drawing, PSPDFKit will attempt to detect the shape you have drawn. If a shape is detected with high enough confidence, the drawn ink annotation will be replaced with a shape annotation. If not, the drawing is left untouched. This allows for faster annotation of your documents because you don’t need to switch between different tools.

<video src="/images/guides/android/annotations/magic-ink/MagicInk.mp4" width="50%" loop muted playsinline data-controller="video" data-video-autoplay="true"></video>

## Supported Transformations

We support transformations of the following drawings into their corresponding shape annotations:

- Circles ([`CircleAnnotation`][])
- Rectangles ([`SquareAnnotation`][])
- Arrows ([`LineAnnotation`][] with the line end set to [`OPEN_ARROW`][`lineendtype`])
- Lines ([`LineAnnotation`][] without a line end)

## Disabling the Magic Ink Tool

The Magic Ink tool is defined as `MAGIC_INK` in the [`AnnotationTool`][] enum and is included in the annotation creation toolbar by default. You can easily disable it by using [`#enabledAnnotationTools()`][] in your configuration:

[==

```kotlin
val annotationTools = mutableListOf(*AnnotationTool.values())
annotationTools.remove(AnnotationTool.MAGIC_INK)
configuration.enabledAnnotationTools(annotationTools)
```

```java
List<AnnotationTool> annotationTools = Arrays.asList(AnnotationTool.values());
annotationTools.remove(AnnotationTool.MAGIC_INK);
configuration.enabledAnnotationTools(annotationTools);
```

==]

Please refer to the [Annotation-Editing Configuration][controlannotationtools] guide article for more details.

### Stripping Shape Detection Templates

The PSPDFKit library AAR contains a `PSPDFShapeTemplates.json` asset file that defines shape templates used by the Magic Ink tool. This contributes to the size of your APK by approximately 900&nbsp;KB. If you don’t want to use the Magic Ink tool in your app, it is recommended that you strip this asset file while building your app to decrease your app’s size.

To strip the shape templates when building, extend the `android` closure in your `build.gradle` file with the following:

```build.gradle
android {
    aaptOptions {
        ignoreAssetsPattern "!PSPDFShapeTemplates.json"
    }
}
```

[`lineendtype`]: https://pspdfkit.com/api/android/reference/com/pspdfkit/annotations/LineEndType.html
[`annotationtool`]: https://pspdfkit.com/api/android/reference/com/pspdfkit/ui/special_mode/controller/AnnotationTool.html
[`#enabledannotationtools()`]: https://pspdfkit.com/api/android/reference/com/pspdfkit/configuration/activity/PdfActivityConfiguration.Builder.html#enabledAnnotationTools(java.util.List<com.pspdfkit.ui.special_mode.controller.AnnotationTool>)
[controlannotationtools]: ../../annotations/configuring-annotation-editing/#control-which-annotation-tools-are-enabled
